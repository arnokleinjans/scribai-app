<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scribai | AI Dictation</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Sidebar met instellingen -->
    <aside>
        <div class="sidebar-header">
            <div class="logo">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="url(#logo-gradient)"
                    stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="scribai-logo">
                    <defs>
                        <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:var(--accent-color);stop-opacity:1" />
                            <stop offset="100%" style="stop-color:var(--secondary-accent);stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path d="M18 2L6 14M6 14l-2 6 6-2 12-12M6 14l3-3M17 3l4 4M2 22s5-1 7-3M22 2s-1 5-3 7"></path>
                    <path d="M14 6c1 0 2 1 2 2s-1 2-2 2-2-1-2-2 1-2 2-2z" fill="var(--accent-color)" stroke="none"
                        opacity="0.3"></path>
                </svg>
                Scribai
            </div>
            <button id="sidebarToggle" class="sidebar-toggle" title="Toggle Sidebar">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>
        </div>

        <div class="sidebar-content" id="sidebarContent">
            <div class="sidebar-section">
                <h3>ğŸ”‘ Configuratie</h3>
                <div class="input-group">
                    <label for="assemblyKey">AssemblyAI API Sleutel</label>
                    <div class="password-wrapper">
                        <input type="password" id="assemblyKey" placeholder="Voer je sleutel in...">
                        <button type="button" class="toggle-password" data-target="assemblyKey"
                            title="Toon/Verberg sleutel">ğŸ‘ï¸</button>
                    </div>
                    <p class="help-text">Nog geen sleutel? <a href="https://www.assemblyai.com/" target="_blank">Maak
                            hier
                            gratis aan</a>.</p>
                </div>
                <div class="input-group">
                    <label for="geminiKey">Gemini API Sleutel</label>
                    <div class="password-wrapper">
                        <input type="password" id="geminiKey" placeholder="Voer je sleutel in...">
                        <button type="button" class="toggle-password" data-target="geminiKey"
                            title="Toon/Verberg sleutel">ğŸ‘ï¸</button>
                    </div>
                    <p class="help-text">Koop of genereer <a href="https://aistudio.google.com/" target="_blank">hier je
                            Google API key</a>.</p>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>ğŸ¢ Smart Templates</h3>
                <div class="input-group">
                    <label for="templateSelect">Kies Template</label>
                    <div style="display: flex; gap: 8px;">
                        <!-- Oude native select (verborgen gehouden als fallback/backend reference) -->
                        <select id="templateSelect" style="display: none;"></select>

                        <!-- Nieuwe Custom Dropdown -->
                        <div class="custom-select-wrapper" id="customTemplateWrapper" style="flex: 1;">
                            <div class="custom-select-trigger" id="customTemplateTrigger">
                                <span id="customTemplateText">Kies een template...</span>
                                <div class="arrow"></div>
                            </div>
                            <div class="custom-options" id="customTemplateOptions">
                                <!-- Opties worden via JS ingeladen -->
                            </div>
                        </div>
                        <button id="deleteTemplateBtn" class="btn-outline"
                            style="padding: 0 10px; border-color: var(--danger-color); color: var(--danger-color);"
                            title="Verwijder geselecteerde template">ğŸ—‘ï¸</button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="templateName">Nieuwe Template Naam</label>
                    <input type="text" id="templateName" placeholder="Bijv. E-mail Draft">
                </div>
                <div class="input-group">
                    <label for="contextText">Template Instructie (Prompt)</label>
                    <textarea id="contextText" rows="6"
                        placeholder="Beschrijf hier wat de AI moet doen met het transcript..."></textarea>
                </div>
                <button id="saveTemplateBtn" class="btn-outline" style="width: 100%;">ğŸ’¾ Template Opslaan /
                    Updaten</button>
            </div>

            <div class="sidebar-section">
                <h3>ğŸ‘¥ Gesprekspartners</h3>
                <div class="input-group">
                    <textarea id="namesText" rows="2" placeholder="Arno, Kitty, Jeroen"></textarea>
                    <p class="help-text">Zet hier de namen van de sprekers, gescheiden door een komma.</p>
                </div>
            </div>


            <div class="sidebar-section">
                <h3>ğŸ“„ Oud Transcript Laden</h3>
                <div class="input-group">
                    <input type="file" id="transcriptInput" accept=".md" style="display: none;">
                    <button id="loadTranscriptBtn" class="btn-outline" style="width: 100%; margin-bottom: 8px;">Kies .md
                        bestand...</button>
                    <p id="loadedTranscriptPath" class="help-text"
                        style="word-break: break-all; color: var(--accent-light);">Geen bestand ingeladen</p>
                </div>
            </div>

            <div style="padding: 1rem 0;">
                <button id="saveSettings" class="btn-primary" style="width: 100%;">Alles Opslaan</button>
            </div>
        </div>
    </aside>

    <!-- Animated Wave Background -->
    <div class="wave-background">
        <svg class="wave wave1" viewBox="0 0 1440 320" preserveAspectRatio="none">
            <path fill="var(--accent-color)" fill-opacity="0.2"
                d="M0,160L48,144C96,128,192,96,288,106.7C384,117,480,171,576,165.3C672,160,768,96,864,96C960,96,1056,160,1152,176C1248,192,1344,160,1392,144L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z">
            </path>
        </svg>
        <svg class="wave wave2" viewBox="0 0 1440 320" preserveAspectRatio="none">
            <path fill="var(--secondary-accent)" fill-opacity="0.15"
                d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,138.7C960,139,1056,117,1152,133.3C1248,149,1344,203,1392,229.3L1440,256L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z">
            </path>
        </svg>
        <svg class="wave wave3" viewBox="0 0 1440 320" preserveAspectRatio="none">
            <path fill="rgba(6, 182, 212, 0.1)"
                d="M0,224L48,229.3C96,235,192,245,288,218.7C384,192,480,128,576,117.3C672,107,768,149,864,170.7C960,192,1056,192,1152,186.7C1248,181,1344,171,1392,165.3L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z">
            </path>
        </svg>
    </div>

    <!-- Hoofdgedeelte van de applicatie -->
    <main>
        <div class="record-container">
            <button id="recordBtn" class="record-btn">
                <svg viewBox="0 0 24 24">
                    <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" />
                    <path
                        d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" />
                </svg>
            </button>
            <div id="timer" class="hidden">00:00</div>
            <h2 id="instructionText">Klik om de opname te starten</h2>
        </div>

        <!-- Resultaten Sectie -->
        <div id="results" class="results-container">
            <!-- Transcript Sectie -->
            <div class="card">
                <h2>ğŸ—£ï¸ Transcriptie & Sprekers</h2>
                <div id="transcriptLines">
                    <!-- Lines worden hier dynamisch toegevoegd -->
                </div>
                <!-- Acties voor Transcript -->
                <div class="card-actions flow-actions">
                    <button id="scribaiItBtn" class="btn-scribai" style="display: none;">âš¡ï¸ Scribai It!</button>
                    <button id="downloadTranscript" class="btn-outline full-width" style="display: none;">â¬‡ï¸ Transcript
                        Opslaan (.md)</button>
                </div>
            </div>

            <!-- Notulen Sectie -->
            <div class="card">
                <h2>ğŸ“ Gegenereerde Output</h2>
                <div id="minutesContent" class="markdown-body">
                    <!-- Markdown content komt hier -->
                </div>
                <!-- Acties voor Output -->
                <div class="card-actions">
                    <button id="downloadMinutes" class="btn-primary full-width" style="display: none;">â¬‡ï¸ Scribai
                        Opslaan (.md)</button>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="app.js"></script>
</body>

</html>